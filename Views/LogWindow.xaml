<Window x:Class="BootLauncherLite.Views.LogWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="BootLauncherLite Log"
        Height="400"
        Width="600"
        WindowStartupLocation="CenterOwner"
        Background="#111827"
        Foreground="White">

    <Window.Resources>
        <!-- These brushes can be overridden from ApplyTheme if you add one later -->
        <SolidColorBrush x:Key="ComboBgBrush"    Color="#FF1F2937"/>
        <SolidColorBrush x:Key="ComboFgBrush"    Color="#FFFFFFFF"/>
        <SolidColorBrush x:Key="ComboHoverBrush" Color="#FF374151"/>
        <SolidColorBrush x:Key="ThemeTextBrush"                 Color="#E5E7EB"/>
        <!-- GroupBox -->
        <SolidColorBrush x:Key="GroupBoxBackgroundBrush" Color="#1F2937"/>
        <SolidColorBrush x:Key="GroupBoxBorderBrush"     Color="#374151"/>
        <SolidColorBrush x:Key="GroupBoxForegroundBrush" Color="White"/>

        <!-- Buttons (same system as LaunchItemAttributesWindow) -->
        <SolidColorBrush x:Key="ButtonBackgroundBrush"        Color="#1F2937"/>
        <SolidColorBrush x:Key="ButtonBorderBrush"            Color="#374151"/>
        <SolidColorBrush x:Key="ButtonForegroundBrush"        Color="White"/>

        <SolidColorBrush x:Key="ButtonHoverBackgroundBrush"   Color="#2B5EBF"/>
        <SolidColorBrush x:Key="ButtonHoverBorderBrush"       Color="#60A5FA"/>
        <SolidColorBrush x:Key="ButtonPressedBackgroundBrush" Color="#1E40AF"/>

        <!-- Data-related brushes (kept for consistency with the rest of the app) -->
        <SolidColorBrush x:Key="DataGridBackgroundBrush" Color="#111827"/>
        <SolidColorBrush x:Key="DataGridRowBrush"        Color="#1F2937"/>
        <SolidColorBrush x:Key="DataGridAltRowBrush"     Color="#111827"/>
        <SolidColorBrush x:Key="DataGridGridLinesBrush"  Color="#374151"/>
        <SolidColorBrush x:Key="DataGridHoverBrush"      Color="#2B5EBF"/>
        <SolidColorBrush x:Key="DataGridSelectedBrush"   Color="#2B3440"/>
        <SolidColorBrush x:Key="DataGridForegroundBrush" Color="White"/>

        <SolidColorBrush x:Key="DataGridHeaderBackgroundBrush" Color="#111827"/>
        <SolidColorBrush x:Key="DataGridHeaderForegroundBrush" Color="White"/>

        <!-- Dark themed ComboBox (copied from LaunchItemAttributesWindow for consistency if you add combos later) -->
        <Style x:Key="ThemedComboBox" TargetType="ComboBox">
            <Setter Property="Foreground" Value="{DynamicResource ComboFgBrush}" />
            <Setter Property="Background" Value="{DynamicResource ComboBgBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource ComboBgBrush}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Padding" Value="4,2" />
            <Setter Property="SnapsToDevicePixels" Value="True" />
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto" />
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto" />

            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBox">
                        <Grid>
                            <ToggleButton x:Name="ToggleButton"
                                          Background="{DynamicResource ComboBgBrush}"
                                          BorderBrush="{DynamicResource ComboBgBrush}"
                                          BorderThickness="1"
                                          Focusable="False"
                                          ClickMode="Press"
                                          IsChecked="{Binding IsDropDownOpen, Mode=TwoWay,
                                                              RelativeSource={RelativeSource TemplatedParent}}">
                                <Grid>
                                    <Border Background="{DynamicResource ComboBgBrush}"
                                            CornerRadius="2"/>
                                    <ContentPresenter
                                        Margin="6,3,25,3"
                                        HorizontalAlignment="Left"
                                        VerticalAlignment="Center"
                                        Content="{TemplateBinding SelectionBoxItem}"
                                        ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                        ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}" />
                                    <Path x:Name="Arrow"
                                          VerticalAlignment="Center"
                                          HorizontalAlignment="Right"
                                          Margin="0,0,8,0"
                                          Fill="{DynamicResource ComboFgBrush}"
                                          Data="M 0 0 L 4 4 L 8 0 Z" />
                                </Grid>
                            </ToggleButton>

                            <Popup x:Name="Popup"
                                   Placement="Bottom"
                                   AllowsTransparency="True"
                                   Focusable="False"
                                   PopupAnimation="Slide"
                                   IsOpen="{TemplateBinding IsDropDownOpen}"
                                   PlacementTarget="{Binding ElementName=ToggleButton}">
                                <Border Background="{DynamicResource ComboBgBrush}"
                                        BorderBrush="{DynamicResource ComboBgBrush}"
                                        BorderThickness="1">
                                    <ScrollViewer>
                                        <StackPanel IsItemsHost="True" />
                                    </ScrollViewer>
                                </Border>
                            </Popup>
                        </Grid>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="ToggleButton"
                                        Property="Background"
                                        Value="{DynamicResource ComboHoverBrush}" />
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.6" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>

            <Setter Property="ItemContainerStyle">
                <Setter.Value>
                    <Style TargetType="ComboBoxItem">
                        <Setter Property="Background" Value="{DynamicResource ComboBgBrush}" />
                        <Setter Property="Foreground" Value="{DynamicResource ComboFgBrush}" />
                        <Setter Property="Padding" Value="4,2" />
                        <Style.Triggers>
                            <Trigger Property="IsHighlighted" Value="True">
                                <Setter Property="Background"
                                        Value="{DynamicResource ComboHoverBrush}" />
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background"
                                        Value="{DynamicResource ComboHoverBrush}" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="Button">
            <!-- base brushes coming from theme -->
            <Setter Property="Background"      Value="{DynamicResource ButtonBackgroundBrush}"/>
            <Setter Property="BorderBrush"     Value="{DynamicResource ButtonBorderBrush}"/>
            <Setter Property="Foreground"      Value="{DynamicResource ButtonForegroundBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding"         Value="6,3"/>
            <Setter Property="Cursor"          Value="Hand"/>

            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                BorderBrush="{TemplateBinding BorderBrush}"
                BorderThickness="{TemplateBinding BorderThickness}"
                CornerRadius="6"
                Padding="{TemplateBinding Padding}">
                            <!-- TextBlock so we fully control text color -->
                            <TextBlock Style="{x:Null}"
                       Text="{TemplateBinding Content}"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       Foreground="{DynamicResource ButtonForegroundBrush}"
                       TextWrapping="NoWrap"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>

            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background"  Value="{DynamicResource ButtonHoverBackgroundBrush}"/>
                    <Setter Property="BorderBrush" Value="{DynamicResource ButtonHoverBorderBrush}"/>
                    <Setter Property="Foreground"  Value="{DynamicResource ButtonForegroundBrush}"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="{DynamicResource ButtonPressedBackgroundBrush}"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Opacity" Value="0.5"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Style="{StaticResource ThemeLabel}" />-->
        <Style x:Key="ThemeLabel" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{DynamicResource GroupBoxForegroundBrush}" />
        </Style>
    </Window.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <ListBox x:Name="LogListBox"
         ItemsSource="{Binding Entries}"
         Grid.Row="0"
         FontFamily="Consolas"
         FontSize="13"
         Background="#111827"
         BorderBrush="#374151"
         BorderThickness="1">
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <!-- Don't force a foreground â€“ inherit from LogListBox / theme -->
                    <Setter Property="Background" Value="Transparent"/>
                    <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="#2B5EBF"/>
                        </Trigger>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" Value="#1F2937"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </ListBox.ItemContainerStyle>
        </ListBox>

        <StackPanel Grid.Row="1"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,8,0,0">
            <!-- This button now automatically uses ThemedButton style/colors -->
            <Button Content="Close"
                    Width="80"
                    IsCancel="True"
                    Click="CloseButton_Click" />
        </StackPanel>
    </Grid>
</Window>

