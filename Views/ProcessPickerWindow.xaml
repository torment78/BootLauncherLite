<Window x:Class="BootLauncherLite.Views.ProcessPickerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:controls="clr-namespace:System.Windows.Controls;assembly=PresentationFramework"
        mc:Ignorable="d"
        Title="Select Process"
        Height="450"
        Width="800"
        WindowStartupLocation="CenterOwner"
        Background="#0B0E13"
        Foreground="#E5E7EB">

    <Window.Resources>

        <!-- THEME BRUSHES (now effectively fixed for Lite) -->
        <SolidColorBrush x:Key="ComboBgBrush"    Color="#FF1F2937"/>
        <!-- dark grey -->
        <SolidColorBrush x:Key="ComboFgBrush"    Color="#FFFFFFFF"/>
        <!-- white text -->
        <SolidColorBrush x:Key="ComboHoverBrush" Color="#FF374151"/>
        <SolidColorBrush x:Key="ThemeTextBrush"  Color="#E5E7EB"/>

        <!-- GroupBox -->
        <SolidColorBrush x:Key="GroupBoxBackgroundBrush" Color="#1F2937"/>
        <SolidColorBrush x:Key="GroupBoxBorderBrush"     Color="#374151"/>
        <SolidColorBrush x:Key="GroupBoxForegroundBrush" Color="White"/>

        <!-- Buttons -->
        <SolidColorBrush x:Key="ButtonBackgroundBrush"        Color="#1F2937"/>
        <SolidColorBrush x:Key="ButtonBorderBrush"            Color="#374151"/>
        <SolidColorBrush x:Key="ButtonForegroundBrush"        Color="White"/>

        <SolidColorBrush x:Key="ButtonHoverBackgroundBrush"   Color="#2B5EBF"/>
        <SolidColorBrush x:Key="ButtonHoverBorderBrush"       Color="#60A5FA"/>
        <SolidColorBrush x:Key="ButtonPressedBackgroundBrush" Color="#1E40AF"/>

        <!-- DataGrid theme brushes -->
        <SolidColorBrush x:Key="DataGridBackgroundBrush" Color="#111827"/>
        <SolidColorBrush x:Key="DataGridRowBrush"        Color="#1F2937"/>
        <SolidColorBrush x:Key="DataGridAltRowBrush"     Color="#111827"/>
        <SolidColorBrush x:Key="DataGridGridLinesBrush"  Color="#374151"/>
        <SolidColorBrush x:Key="DataGridHoverBrush"      Color="#2B5EBF"/>
        <SolidColorBrush x:Key="DataGridSelectedBrush"   Color="#2B3440"/>
        <SolidColorBrush x:Key="DataGridForegroundBrush" Color="White"/>

        <!-- header-only brushes -->
        <SolidColorBrush x:Key="DataGridHeaderBackgroundBrush" Color="#111827"/>
        <SolidColorBrush x:Key="DataGridHeaderForegroundBrush" Color="White"/>

        <!-- GROUPBOX STYLE -->
        <Style TargetType="GroupBox" x:Key="RoundedGroupBox">
            <Setter Property="Foreground"    Value="{DynamicResource GroupBoxForegroundBrush}"/>
            <Setter Property="Background"    Value="{DynamicResource GroupBoxBackgroundBrush}"/>
            <Setter Property="BorderBrush"   Value="{DynamicResource GroupBoxBorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding"       Value="8"/>
            <Setter Property="Margin"        Value="0,0,0,10"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="GroupBox">
                        <Grid>
                            <Border Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="12"
                                    Padding="{TemplateBinding Padding}">
                                <ContentPresenter Margin="0,10,0,0" />
                            </Border>

                            <!-- header overlay, still fixed dark so header "tab" looks nice -->
                            <Border Background="#111827"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Top"
                                    Margin="12,-10,0,0"
                                    Padding="6,0"
                                    CornerRadius="2"
                                    IsHitTestVisible="False">
                                <ContentPresenter ContentSource="Header"
                                                  RecognizesAccessKey="True"
                                                  SnapsToDevicePixels="True" />
                            </Border>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- BUTTON STYLE -->
        <Style TargetType="Button">
            <Setter Property="Background"      Value="{DynamicResource ButtonBackgroundBrush}"/>
            <Setter Property="Foreground"      Value="{DynamicResource ButtonForegroundBrush}"/>
            <Setter Property="BorderBrush"     Value="{DynamicResource ButtonBorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding"         Value="6,3"/>
            <Setter Property="Cursor"          Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              RecognizesAccessKey="True"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <!-- hover color -->
                    <Setter Property="Background"  Value="{DynamicResource ButtonHoverBackgroundBrush}"/>
                    <Setter Property="BorderBrush" Value="{DynamicResource ButtonHoverBorderBrush}"/>
                    <Setter Property="Foreground"  Value="White"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="{DynamicResource ButtonPressedBackgroundBrush}"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Opacity" Value="0.5"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- DATAGRID STYLE so the "panel" follows the theme -->
        <Style TargetType="DataGrid">
            <Setter Property="Background"              Value="{DynamicResource DataGridBackgroundBrush}"/>
            <Setter Property="Foreground"              Value="{DynamicResource DataGridForegroundBrush}"/>
            <Setter Property="RowBackground"           Value="{DynamicResource DataGridRowBrush}"/>
            <Setter Property="AlternatingRowBackground" Value="{DynamicResource DataGridAltRowBrush}"/>
            <Setter Property="GridLinesVisibility"     Value="{x:Static controls:DataGridGridLinesVisibility.All}"/>
            <Setter Property="HorizontalGridLinesBrush" Value="{DynamicResource DataGridGridLinesBrush}"/>
            <Setter Property="VerticalGridLinesBrush"  Value="{DynamicResource DataGridGridLinesBrush}"/>
            <Setter Property="BorderBrush"             Value="{DynamicResource DataGridGridLinesBrush}"/>
            <Setter Property="BorderThickness"         Value="1"/>
            <Setter Property="RowStyle">
                <Setter.Value>
                    <Style TargetType="DataGridRow">
                        <Setter Property="Foreground" Value="{DynamicResource DataGridForegroundBrush}"/>
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="SnapsToDevicePixels" Value="True"/>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource DataGridHoverBrush}"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background" Value="{DynamicResource DataGridSelectedBrush}"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Setter.Value>
            </Setter>
            <!-- Column header style to match theme -->
            <Setter Property="ColumnHeaderStyle">
                <Setter.Value>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background"      Value="{DynamicResource DataGridBackgroundBrush}"/>
                        <Setter Property="Foreground"      Value="{DynamicResource DataGridForegroundBrush}"/>
                        <Setter Property="BorderBrush"     Value="{DynamicResource DataGridGridLinesBrush}"/>
                        <Setter Property="BorderThickness" Value="0,0,0,1"/>
                        <Setter Property="Padding"         Value="6,4"/>
                    </Style>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ThemeLabel" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{DynamicResource GroupBoxForegroundBrush}" />
        </Style>
    </Window.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Process list -->
        <DataGrid x:Name="ProcessesGrid"
                  ItemsSource="{Binding Processes}"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  Grid.Row="0"
                  SelectionMode="Single"
                  SelectionUnit="FullRow">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Process"
                                    Binding="{Binding ProcessName}"
                                    Width="2*" />
                <DataGridTextColumn Header="Path"
                                    Binding="{Binding FilePath}"
                                    Width="3*" />
            </DataGrid.Columns>
        </DataGrid>

        <!-- Buttons -->
        <StackPanel Grid.Row="1"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,10,0,0">
            <Button Content="OK"
                    Width="90"
                    Margin="0,0,10,0"
                    IsDefault="True"
                    Click="Ok_Click" />
            <Button Content="Cancel"
                    Width="90"
                    IsCancel="True"
                    Click="Cancel_Click" />
        </StackPanel>
    </Grid>
</Window>
